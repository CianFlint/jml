var trigger;function numberedList(e,t,r=0,i=". "){if(void 0===t)return e;let l=r;for(let o of e)l++,o[t]=l+i+o[t];return e}function sortArray(e,t,r=!1){if(void 0===t)return e;let i=typeof e[0][t];return"string"==i&&e.sort((e,r)=>(e=e[t].toUpperCase())<(r=r[t].toUpperCase())?-1:e>r?1:0),"number"==i&&e.sort((e,r)=>e[t]-r[t]),"object"==i&&e.sort((e,r)=>e[t].length-r[t].length),r&&(e=e.reverse()),e}function omitParent(e,t){if(void 0===t)return e;if(void 0===e.length){if(e[t].length){let r=0,i=[...e[t]];for(let l of(delete e[t],i)){for(let o of Object.keys(l))e[o+"__"+r]=l[o];r++}}else for(let n of Object.keys(e[t]))e[n]=e[t][n];return e}let f=0;for(let u of e){let c={...e[f]};for(let g of(delete e[f][t],Object.keys(c[t])))e[f][g]=c[t][g];f++}return e}function renameNode(e,t,r){if(void 0===t||void 0===r)return e;let i=e[t];return delete e[t],e[r]=i,e}function toIndex(e,t,r=0){if("object"==typeof t){for(let i of t.reverse())toIndex(e,i,r);return e}let l=-1,o={...e},n=!1;for(let f of(r<0&&(r=Object.keys(e).length+r+1),Object.keys(e)))++l==r&&(delete e[t],e[t]=o[t],n=!0),f!=t&&(delete e[f],e[f]=o[f]);return n||delete e[t],e[t]=o[t],e}function nodeIndex(e,t){return Object.keys(e).indexOf(t)}!function(){document.addEventListener("DOMContentLoaded",async()=>{t()}),trigger=t;let e=[];async function t(l=null){if(l&&document.querySelectorAll("[each][trigger='{index}']").length&&!document.querySelectorAll("[trigger='"+l+"']").length){l in e||e.push(l);return}if(l)for(let o of document.querySelectorAll("[trigger='"+l+"']"))o.removeAttribute("trigger");for(let n of document.querySelectorAll("[get],[json]"))n.style.visibility="hidden";for(let f of document.querySelectorAll("[get]")){"hidden"!=f.getAttribute("visibility")&&f.setAttribute("visibility","");try{for(let u of f.querySelectorAll("[trigger='"+f.getAttribute("trigger")+"'] > *"))u.hasAttribute("trigger")||u.setAttribute("trigger",f.getAttribute("trigger"))}catch{}if(f.hasAttribute("trigger"))continue;for(let c of f.querySelectorAll(":not([trigger]) > [loading]"))c.style.visibility="visible";let g=await i(f.getAttribute("get"));g&&(f.removeAttribute("get"),r(f,g))}for(let d of document.querySelectorAll("[json]")){"hidden"!=d.getAttribute("visibility")&&d.setAttribute("visibility","");try{for(let a of d.querySelectorAll("[trigger='"+d.getAttribute("trigger")+"'] > *").reverse())a.hasAttribute("trigger")||a.setAttribute("trigger",d.getAttribute("trigger"))}catch{}if(!d.hasAttribute("trigger")){for(let A of d.querySelectorAll(":not([trigger]) > [loading]"))A.style.visibility="visible";try{let y=JSON.parse(d.getAttribute("json"));if(!y)continue;d.removeAttribute("json"),r(d,y)}catch{}}}await i("");let b=[];for(let m of document.querySelectorAll("[trigger] > *"))b.push(m.parentElement.innerHTML);document.body.innerHTML=document.body.innerHTML.replace(/get="{this:(.+?)}"/gm,"get='$1'"),document.querySelectorAll("[get]").length-document.querySelectorAll("[get][trigger]").length&&await t(),document.body.innerHTML=document.body.innerHTML.replace(/{this:(.+?)}/gm,"$1");let v=0;for(let p of document.querySelectorAll("[trigger] > *"))p.parentElement&&(p.parentElement.innerHTML=b[v]),v++;for(let h of document.querySelectorAll(".row_last"))h.remove();for(let $ of document.querySelectorAll(":not([trigger]) > [tsrc]"))$.setAttribute("src",$.getAttribute("tsrc")),$.removeAttribute("tsrc");for(let _ of document.querySelectorAll("[visibility]:not([trigger])"))"hidden"!=_.getAttribute("visibility")&&(_.style.visibility=""),_.removeAttribute("visibility");for(let q of document.querySelectorAll(":not([trigger]) > [loading]"))q.remove();for(let S of document.querySelectorAll(":not([trigger]) > [after]")){let L=S.getAttribute("after");L?S.parentElement.querySelector("[class='"+L+"']").after(S):S.parentElement.appendChild(S),S.removeAttribute("after")}for(let M of document.querySelectorAll("[style='']:not([trigger])"))M.removeAttribute("style");for(let H of e)await t(e.pop(e.indexOf(H)));for(let T of document.querySelectorAll(":not([trigger]) > [loaded]")){let w=T.getAttribute("loaded").split(/[()]/),x=w[1].replaceAll(" ","").split(",");x[0]||(x=[]),window[w[0]](...x),T.removeAttribute("loaded")}}async function r(e,t){let r={};for(let i of(r.include=n(e.getAttribute("include"),!1),r.exclude=n(e.getAttribute("exclude"),!0),r.limit=e.getAttribute("limit"),r.modifier={func:null,selector:null,args:[]},e.removeAttribute("include"),e.removeAttribute("exclude"),e.removeAttribute("limit"),l(e,t,r),u(e,t,"",r,e),e.querySelectorAll(":not([trigger]) > [each]")))i.remove()}async function i(e){if("{this}"!=e&&""!=e&&null!=e)return await (await fetch(e)).json()}async function l(e,t,r){let i=e.getAttribute("modifier");if(!i)return;let l=i.split(/[()]/),o=l[1].replaceAll(" ","").split(",");r.modifier.func=l[0],r.modifier.selector=o[0]||"",r.modifier.args=o.slice(1),e.removeAttribute("modifier")}function o(e,t){if(-1==(index=e.indexOf(t)))return e;let r=[e.slice(0,index),e.slice(index+t.length)];return r}function n(e,t){if(t=t||!1,!e)return;let r=[[],[]];return!function e(t,r,i){if(i[0].includes(r.slice(1))||i[0].push(r.slice(1)),0==t){i[1].push(r.slice(1));return}if("string"==typeof t){e(0,r+"."+t,i);return}for(let l of t)-1!=l.indexOf(".")?e((s=o(l,"."))[1].split("|"),r+"."+s[0],i):e(l,r,i)}(e?.replaceAll(/\s/g,"")?.split(","),"",r),r[t?1:0]}async function f(e,t,r,i,l,o){let n=!1;for(let f of l.querySelectorAll("[each]")){if(f.getAttribute("each")!=r)continue;n=!0;let u=f.cloneNode(!0);u.removeAttribute("each"),e.after(u),i.modifier&&i.modifier.selector==r&&(t=window[i.modifier.func](t,...i.modifier.args));let c=typeof t;"string"===c||"number"===c?u.outerHTML=await u.outerHTML.replaceAll(/{this.*?}/g,"{this:"+t+"}").replaceAll("{index}",o):u.outerHTML=await u.outerHTML.replaceAll(/"{this.*?}"/g,"'"+JSON.stringify(t)+"'").replaceAll("{index}",o)}i.modifier&&n&&i.modifier.selector==r&&delete i.modifier}async function u(e,t,r,i,l,n=0){if(r=r.replaceAll(/__\d+\./g,".").replaceAll(/__\d+/g,""),i?.include&&!i.include.includes(r)&&!(i.include.slice(-1)[0].includes(".*")&&r.includes(i.include.slice(-1)[0].split("*")[0]))||i?.exclude&&i.exclude.includes(r)){e.remove();return}i.modifier&&i.modifier.selector==r&&(t=window[i.modifier.func](t,...i.modifier.args));let c=i.limit?parseInt(i.limit,10):-1;if("string"==typeof t||"number"==typeof t){if(e.innerHTML=t,"row"==e.className){let g=document.createElement("span");g.innerHTML=e.innerHTML,g.classList.add("row"),e.after(g),e.remove()}}else if(t){if(t.length){let d=0;for(let a of(i.modifier&&i.modifier.selector==r&&delete i.modifier,t)){if(0==c)return;e.insertAdjacentHTML("beforeend","<div class='row'></div>");let A=e.querySelectorAll(".row"),y=A[A.length-1];u(y,a,r,i,l,n+d),1==c&&(e.insertAdjacentHTML("beforeend","<div class='row_last'></div>"),u(y=(A=e.querySelectorAll(".row_last"))[A.length-1],a,r,i,l,n+d)),c--,d++}}else for(let b of function e(t,r,i){if(!r)return t;let l=[];for(let n of r)t.includes(o(n,i)[1]?.slice(1))&&l.push(o(n,i)[1].slice(1));for(let f of t)l.includes(f)||l.push(f);return l}(Object.keys(t),i?.include,r)){let m=b.split("__")[0]+" ";m==b+" "&&(m=""),e.insertAdjacentHTML("beforeend","<div class='"+m+b+"'></div>");let v=e.querySelectorAll("."+b),p=v[v.length-1];f(p,t[b],r+"."+b,i,l,n),u(p,t[b],r?r+"."+b:b,i,l)}}}}();